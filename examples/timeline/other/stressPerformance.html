<!DOCTYPE HTML>
<!-- 
  This example is used mainly for developers to test performance issues by controlling number of groups, 
  number of items and their types.
 -->
<html>

<head>
  <title>Timeline | Stress Performance example</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.2/react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.2/react-dom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>

  <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.4/moment.min.js"></script>
  <script src="../../../dist/vis.js"></script>
  <link href="../../../dist/vis-timeline-graph2d.min.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <div id="visualization"></div>
</body>

<script type="text/babel">
  var timeline
  var now = moment();
  var groupCount = 20;
  var itemCount = 2000;

  // create a data set with groups
  var groups = new vis.DataSet();
  for (var g = 0; g < groupCount; g++) {
    groups.add({
      id: g,
      content: "group " + g
    });
  }

  // var types = ['point', 'range', 'box', 'background']
  var types = ['range']
  
  // create a dataset with items
  var items = new vis.DataSet();
  for (var i = 0; i < itemCount; i++) {
    var start = now.clone().add(Math.random() * 180, 'days');
    var end = start.clone().add(Math.random() * 1, 'days');
    var group = Math.floor(Math.random() * groupCount);
    items.add({
      id: i,
      type: types[Math.floor(Math.random() * types.length)],
      group: group,
      content: '' + i,
      start: start,
      end: end
    });
  }
 
  var GroupTemplate = React.createClass({
    render: function() {
      var { group } = this.props;
      return <div>
          <label>{group.content}</label>
      </div>
    }
  })

  var ItemTemplate = React.createClass({
    render: function() {
      var { item } = this.props;
      return <div>
          <label>{item.content}</label>
      </div>
    }
  })

  var options = {
    width: '100%',
    height: '500px',
    stack: false,
    showCurrentTime: false,
    selectable: true,
    editable: true,
    template: function (item, element) {
      if (!item) { return }
      ReactDOM.unmountComponentAtNode(element);
      return ReactDOM.render(<ItemTemplate item={item} />, element);
    },
    groupTemplate: function (group, element) {
        if (!group) { return }
        ReactDOM.unmountComponentAtNode(element);
        return ReactDOM.render(<GroupTemplate group={group} />, element);
    }
  };
  
  var VisTimeline = React.createClass({
    componentDidMount: function() {
      return initTimeline();
    },
    render: function() {
      return <div>

        <div id="mytimeline"></div>
        </div>
      }
    });

    function initTimeline() {
      var container = document.getElementById('mytimeline');
      timeline = new vis.Timeline(container, items, groups, options);
    } 
    
    
      // var container = document.getElementById('visualization');
      // timeline = new vis.Timeline(container);
      // timeline.setOptions(options);
      // timeline.setGroups(groups);
      // timeline.setItems(items);

    ReactDOM.render(<VisTimeline />, document.getElementById('visualization'));
    </script>

</html>